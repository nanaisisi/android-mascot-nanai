> **AI 関与について**: このドキュメントは GitHub
> Copilot の支援により作成されました。キャラクター設定・仕様はオーナーユーザーと AI の協議により決定されています。

# Mascot Nanai - 開発 TODO

## 🚨 緊急対応が必要な問題

### 1. Tauri アプリ起動エラーの解決

- **現象**: `cargo tauri dev`実行時にアプリが即座に終了
- **対応策**:
  - [ ] RUST_LOG=debug での詳細ログ確認
  - [ ] src-tauri/tauri.conf.json の設定確認
  - [ ] 依存関係の問題調査
  - [ ] 最小構成での Tauri アプリ動作確認

### 2. setupEventListeners のクリーンアップ

- **現象**: 削除済みメニュー要素への参照が残存
- **対応策**:
  - [x] 古いメニューアイテムのイベントリスナー削除
  - [x] iframe メニュー対応への統一
  - [x] 右クリックメニューの修正

## 🎯 優先度：高

### 3. iframe メニューの完全動作確認

- **現状**: 実装済みだが動作未確認
- **対応策**:
  - [ ] 親子ウィンドウ間通信の検証
  - [ ] menu-iframe.html の独立動作確認
  - [ ] index.html でのメッセージ受信確認
  - [ ] コンソールログでの動作追跡

### 4. 標準伺かメニューへの移行

- **現状**: 独自メニュー項目使用中
- **対応策**:
  - [ ] メニュー項目の伺か標準仕様への変更
  - [ ] アクセスキー（括弧内文字）の実装
  - [ ] メニュー階層構造の実装
  - [ ] セパレーター（────）の実装

### 5. ゴースト存在確認時のエラーハンドリング

- **現状**: エラー時に何も表示されない仕様
- **対応策**:
  - [ ] デバッグ用の詳細ログ追加
  - [ ] ゴーストディレクトリスキャンの確実性向上
  - [ ] 存在しないゴーストの適切な処理

## 🔧 優先度：中

### 6. SHIORI 連携の完全実装

- **現状**: 基本的なインフラのみ実装
- **対応策**:
  - [ ] C++ライブラリとの統合
  - [ ] SHIORI 3.0 プロトコルの完全実装
  - [ ] イベント処理の拡充
  - [ ] エラーハンドリングの改善

### 7. 設定システムの拡充

- **現状**: 基本的な設定のみ
- **対応策**:
  - [ ] シェル倍率制御の実装
  - [ ] バルーン倍率制御の実装
  - [ ] 表示設定の詳細化
  - [ ] キーボードショートカットの設定

### 8. モーダルシステムの改善

- **現状**: 基本機能は動作
- **対応策**:
  - [ ] モーダル間の状態共有
  - [ ] リアルタイム更新機能
  - [ ] エラー表示の統一化
  - [ ] ユーザビリティの向上

## 🎨 優先度：低

### 9. 複数キャラクター対応

- **現状**: sakura（0 番）のみ対応
- **対応策**:
  - [ ] kero（1 番）キャラクターの表示
  - [ ] キャラクター別メニューの実装
  - [ ] キャラクター間の連携
  - [ ] 表示レイアウトの調整

### 10. 着せ替え・シェル機能

- **現状**: 未実装
- **対応策**:
  - [ ] シェルファイルのスキャン
  - [ ] シェル切り替え機能
  - [ ] 着せ替え UI の実装
  - [ ] シェル情報の表示

### 11. バルーン管理の詳細化

- **現状**: 基本表示のみ
- **対応策**:
  - [ ] バルーンファイルのスキャン
  - [ ] バルーン切り替え機能
  - [ ] バルーンスタイルの設定
  - [ ] 自動バルーン表示

### 12. ネットワーク機能

- **現状**: 未実装
- **対応策**:
  - [ ] RSS/ヘッドライン機能
  - [ ] ネットワーク更新機能
  - [ ] プラグインシステム
  - [ ] メールチェック機能

## 🧪 検証・テスト項目

### 現在の実装の動作確認

- [ ] メニューボタンのクリック応答
- [ ] iframe メニューの表示・非表示
- [ ] モーダルの開閉動作
- [ ] ゴーストスキャン機能
- [ ] 設定の保存・読み込み
- [ ] キーボードショートカット

### 新機能の動作確認

- [ ] 伺か標準メニューの動作
- [ ] SHIORI 連携の動作
- [ ] 複数キャラクター表示
- [ ] シェル切り替え機能
- [ ] バルーン管理機能

## 📋 完了済み項目

### ✅ UI 基盤の実装

- [x] 透過ウィンドウの基本実装
- [x] 右上メニューボタンの実装
- [x] iframe ベースメニューシステム
- [x] モーダルベース UI
- [x] CSS スタイリング

### ✅ ゴースト管理基盤

- [x] ゴーストスキャン機能
- [x] ゴースト選択機能
- [x] ゴースト表示制御
- [x] LocalStorage 状態管理

### ✅ 設定システム基盤

- [x] 設定の保存・読み込み
- [x] UI 設定の適用
- [x] デバッグモーダル
- [x] ログ出力機能

### ✅ ドキュメント整備

- [x] プロジェクト仕様書の作成
- [x] 伺か標準メニュー仕様の整理
- [x] 現在の実装状況の文書化
- [x] TODO リストの作成

---

**最優先対応**：Tauri アプリの起動エラー解決
**次点優先**：iframe メニューの動作確認

_更新日: 2025 年 7 月 5 日_
